<div id="tag-card-editing"
     role="dialog"
     flex="100"
     aria-label="user-card-editing"
     md-theme="appTheme">

    <md-card class="tag-card-edit">
        <form>
        <md-toolbar layout="row" layout-align="center center">
            
            <div flex="5">
                <md-button class="md-icon-button"
                           ng-disabled="true"
                           aria-label="Edit-icon">
                    <md-icon md-font-icon="material-icons">edit</md-icon>
                </md-button>
            </div>

            <div layout="row" flex="90">
                <div flex="40"></div>
                <div>
                    <md-input-container md-no-float
                                        class="custom-input-container-nofloat">
                        <md-select ng-model="user.level"
                                   required
                                   placeholder="Type" 
                                   class="md-block md-no-underline md-select-input-custom"
                                   md-on-close="updatePosition()">
                            <md-option value="0" disabled >Admin</md-option>
                            <md-option value="1">Editor</md-option>
                            <md-option value="2">User</md-option>
                        </md-select>
                    </md-input-container>
                </div>
                <div flex="35"></div>
            </div>

            <div>
                <md-button class="md-icon-button"
                           ng-click="closeDialog()"
                           aria-label="Close Dialog">
                    <md-icon md-font-icon="material-icons md-18">clear</md-icon>
                    <md-tooltip md-direction="top" md-delay="1000">Close</md-tooltip>
                </md-button>
            </div>

        </md-toolbar>

        <md-card-title class="tag-card-title-edit">
            <md-card-title-text>
                    
                <div layout="row" layout-align="space-between center" flex="100">
                    <md-input-container flex="45" class="md-block">
                        <label>First Name</label>
                        <input required
                                ng-model="user.first"
                                aria-label="First Name">
                    </md-input-container>

                    <md-input-container flex="45" class="md-block">
                        <label>Last Name</label>
                        <input ng-model="user.last"
                                aria-label="Last name">
                    </md-input-container>
                </div>
                
            </md-card-title-text>

        </md-card-title>

        
        <md-divider></md-divider>


        <md-content layout-padding>

            <div layout="row" layout-align="space-between center" flex="100">
                    
                    <md-input-container flex="60" class="md-block">
                        <label>Email</label>
                        <input required
                               ng-disabled="action == 'update'";
                               type="email"
                               name="userEmail"
                               ng-model="user.email"
                               minlength="6"
                               maxlength="100"
                               ng-pattern="/^.+@.+\..+$/"
                               aria-label="Email">
                    </md-input-container>

                    <div flex="35" ng-if="!user.password">
                        <md-button class="generatePassword"
                                   md-colors="::{background: 'appTheme-primary-100'}"
                                   ng-click="generatePassword()"
                                   aria-label="password">Generate password</md-button>
                    </div>

                     <div layout="row" flex="35" ng-if="user.password">
                        <md-input-container class="md-block">
                            <label>Password</label>
                            <input name="password"
                                   ng-model="user.password"
                                   aria-label="Password"
                                   md-colors="::{color: 'appTheme-primary-400'}">
                        </md-input-container>
                        <md-button class="md-icon-button md-primary"
                                   ng-click="generatePassword()"
                                   aria-label="password"><md-icon md-font-icon="material-icons md-18">refresh</md-icon></md-button>
                     </div>

            </div>
            
        </md-content>

        <md-divider></md-divider>

        <md-card-footer class="md-card-footer-custom">
            
            <md-card-actions layout="row" layout-align="space-between center">

                <div flex="15" ng-if="action!='create'">
                    <md-button class="md-warn"
                               type="submit"
                               aria-label="Delete"
                               ng-click="deleteUser($event)"
                               ng-if="user.level > 0">Delete</md-button>
                </div>

                <md-input-container class="sendInvitation" flex="35" ng-if="action=='create'">
                    <md-checkbox ng-model="user.emailInvitation"
                                 aria-label="Invitation"
                                 class="md-primary md-hue-1"
                                 md-colors="::{color: 'appTheme-primary-700'}">
                        Send invitation by email.
                    </md-checkbox>
                </md-input-container>

                <div flex="15">
                    <md-button class="md-raised md-accent"
                                type="submit"
                                ng-disabled="saveDisable()";
                                ng-click="saveUser()"
                                aria-label="Save">Save</md-button>
                </div>
            </md-card-actions>
        </md-card-footer>
        </form>
    </md-card>
</div>